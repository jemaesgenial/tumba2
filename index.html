<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Hydra Animalario Corridos Tumbados</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100vw; height: 100vh;
      background: black;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      z-index: 0;
    }
    #inputs {
      position: fixed;
      bottom: 0;
      width: 100%;
      display: flex;
      justify-content: space-around;
      background: rgba(0,0,0,0.5);
      padding: 10px;
      z-index: 10;
    }
    textarea {
      width: 30%;
      height: 60px;
      font-size: 18px;
      padding: 10px;
      border-radius: 8px;
      border: 2px solid white;
      background: rgba(255,255,255,0.1);
      color: white;
      resize: none;
    }
  </style>
</head>
<body>
  <div id="inputs">
    <textarea id="left" placeholder="Izquierda (nata, junior...)"></textarea>
    <textarea id="center" placeholder="Centro (peso, ariel...)"></textarea>
    <textarea id="right" placeholder="Derecha (diamantes, tumbados...)"></textarea>
  </div>

  <script src="https://unpkg.com/hydra-synth"></script>
  <script>
    const canvas = document.createElement("canvas");
    document.body.appendChild(canvas);
    const hydra = new Hydra({ canvas });

    // Crea buffers independientes
    const b = [0, 1, 2].map(i => createBuffer());

    const palabras = {
      corridos: () => osc(2, 0.5, 2).colorama(0.1),
      tumbados: () => noise(2, 0.5, 2).colorama(-0.9),
      billete: () => noise(3, 0.4).modulate(osc(2, 0.5, 2), 0.9),
      diamantes: () => voronoi(4,7,2).modulatePixelate(osc(),0.7,0.5).scale(2).colorama(-0.95),
      morro: () => osc().modulate(noise(),0.25).scale([1,3,6],5).colorama(-0.40).colorama(1),
mota: () => noise(15).modulate(voronoi(3,2,5)).kaleid(30).colorama(0.40).colorama(0.5).scale(1),
patrulla: () => shape(4,0.5,0.9).modulateRotate(noise(),0.9).mult(osc(50)).scale([0.90].fast(10)).colorama(8),
rockstar: () => voronoi().modulateRotate(osc(1,0.5,0).kaleid(10).scale(0.5),9,0).mult(osc(5,-0.1,8).kaleid(9)).colorama(0.5),
rubicon: () => osc([5,3,9]).modulatePixelate(noise(),8).mult(osc([10])).scale([0.90].fast(20)).colorama(-0.70),
culiacan: () => noise([4,8,2],6,0.5).colorama(0.590).pixelate(10,8).modulateRotate(noise([5,8]),0.9,4),
chalinno: () => osc().scale(10).rotate(4,5).kaleid(10).colorama(0.9).modulateScrollX(osc(),0.5).mult(voronoi([5,8],8)).colorama(0.8),
baraja: () => voronoi([9,15],3,4).colorama(-0.6).modulatePixelate(voronoi([9,10]),0.5).colorama(1).mult(osc([3,5]),0.5).colorama(-0.2).luma(0.3,0.5),
oro: () => osc([15,5,1],25,3).colorama(-0.10).modulateKaleid(noise([5,1]),0.5).rotate(8,5).scale(0.45,3,5).colorama(-5),
tito: () => voronoi(.5,.2,.9).modulate(noise(.5),0.5).color(9,5,6).luma(0.5),
doble p: () => osc(2,1,.009).pixelate(10,10).kaleid(8),
humilde: () => noise(5).color(4,5,7).pixelate(10,10),
jema: () => osc(4,0.1,2).luma(0).mult(voronoi([10,5,15],0.2, 0.5).thresh(0.5, 0.1)).scale([2,3].fast(1.2)).rotate(15,2).modulate(src(o0)).modulateScale(osc([1,4,8],-0.5,0).scale(2),15,0).modulatePixelate(noise(5).pixelate([8,2,5],[2,8,5]),1024,8),

      // VIDEO: nata
      nata: () => {
        s0.initVideo("https://media.tenor.com/9xMxrnpwoKQAAAPo/natanael-cano.mp4");
        return src(s0).kaleid(3).modulate(noise(3), 0.2);
      },

      // VIDEO: junior
      junior: () => {
        s0.initVideo("https://media.tenor.com/zFBahnOy_vQAAAPo/junior-h.mp4");
        return src(s0).pixelate(20, 20).modulateScale(noise(3), 0.3).scale(1.2);
      },

      // VIDEO: peso
      peso: () => {
        s0.initVideo("https://media.tenor.com/UkMiKAlZmIoAAAPo/peso-pluma-peso-pluma-bailando.mp4");
        return src(s0).rotate(0.3).kaleid(6).modulate(noise(2));
      },

      // VIDEO: ariel
      ariel: () => {
        s0.initVideo("https://media.tenor.com/x_ex6b7TC4UAAAPo/cantando-emocionado.mp4");
        return src(s0).scrollX(0.01).scrollY(0.01).modulateRotate(osc(3), 0.2);
      }
    };

    function updateVisual(inputId, buffer) {
      const text = document.getElementById(inputId).value.toLowerCase().trim();
      const words = text.split(/\s+/).filter(w => palabras[w]);
      if (words.length > 0) {
        let vis = palabras[words[0]]();
        for (let i = 1; i < words.length; i++) {
          vis = vis.diff(palabras[words[i]](), 0.5);
        }
        vis.out(buffer);
      }
    }

    // Detecta cambios en los tres campos
    document.getElementById("left").addEventListener("input", () => updateVisual("left", b[0]));
    document.getElementById("center").addEventListener("input", () => updateVisual("center", b[1]));
    document.getElementById("right").addEventListener("input", () => updateVisual("right", b[2]));

    // Composici√≥n tipo animalario: 3 zonas
    solid().blend(src(b[0]).mask(shape(4,0.5).scrollX(-0.5)), 1/3)
           .blend(src(b[1]).mask(shape(4,0.5)), 1/3)
           .blend(src(b[2]).mask(shape(4,0.5).scrollX(0.5)), 1/3)
           .out();
  </script>
</body>
</html>
